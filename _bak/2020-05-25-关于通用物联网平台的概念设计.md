---
layout: post
title: 关于通用物联网平台的概念设计
description: "关于通用物联网平台的概念设计"
tags: [物联网 时序数据库] 
---


## 目标 
一个开源的，强扩展性强，开箱即用的，高性能的，用户友好的通用物联网后台平台系统。
 
## 组件
1. 网关
  + 概述   
  网关主要作用有2个 a:设备寻址. b:协议转换。   
  其中协议转化又包括2方向:   
  Event: 从设备上报的信息的抽象成一个事件（event)，包括产生事件的对象，事件类型，事件时间，事件参数等信息。    
  Cmd: 对于从后端向设备发送命令抽象为指令，也抽象成一个remote call. http api调用,可以用contract（open api)描述接口，主要包括参数和返回。
  多个cmd可以组合成一个复合cmd.   
  + 关键点   
  性能, NOI, 多实例部署。
  可用性， 多实例部署，故障自动切换和恢复。
  不停机可扩充协议。
  QOS。
2. 事件和指令队列
  + 概述
  缓存事件，提供事件顺序和持久化。接受后端指令产生非原始事件（可带有定时器）。缓存，持久化指令。cmd有状态，（缓存中，发送完毕，已返回）
  + 关键点
  使用时序数据库持久化，事件和指令。
  需要在事务性，性能，可用性之间找平衡。
3. 控制器
  + 自动控制器（规则引擎）。按规则链，设计。每个规则，由一个事件触发。编程的范式如下：
  step1.事件的参数的进行运算 step2.用事件的参数+一个查询模版对时序数据库的查询。 step3 对时序数据库查询的结果进行运算。 
  通过前3步中的参数和结果生成cmd的参数，发起一次cmd的调用。
  + 手动控制器。（页面控制）。step1用户输入参数 step2时序数据库查询结果(可选) step3组合1，2生成Cmd的参数。
  + 报警器
4. 页面（前端）
  一个前端展示块，对应一个事件流+一个时序数据库的查询   
  一个前端控制块，就是手动控制器由用户设置的参数。可以有默认值。
  展示块和控制块应该放在一起。
  
    
  
  
  
  
   
  
  
  







   
